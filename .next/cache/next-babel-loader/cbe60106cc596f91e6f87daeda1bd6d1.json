{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport { MainLayout } from '../../components/MainLayout';\nimport { useRouter } from 'next/router';\nimport styled from \"styled-components\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionGetPost } from \"../../redux/actions/actions\";\nimport PostContainer from \"../../components/postContainer\";\nimport StyledLoader from \"../../components/loader\";\nvar LoaderContainer = styled.div.withConfig({\n  displayName: \"id__LoaderContainer\",\n  componentId: \"a6prau-0\"\n})([\"width:100%;display:flex;justify-content:center;margin-top:50p;\"]);\nexport default function Post(_ref) {\n  var InitialPost = _ref.InitialPost;\n  var router = useRouter();\n  var id = router.query.id;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.posts;\n  }),\n      post = _useSelector.post;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.app.loading;\n  }),\n      loading = _useSelector2.loading;\n\n  useEffect(function () {\n    function load_SPA_data() {\n      return _load_SPA_data.apply(this, arguments);\n    }\n\n    function _load_SPA_data() {\n      _load_SPA_data = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch(actionGetPost(id));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _load_SPA_data.apply(this, arguments);\n    }\n\n    if (!InitialPost) {\n      load_SPA_data();\n    }\n  }, []);\n\n  var getPostForRender = function getPostForRender(singlePost) {\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: !loading ? /*#__PURE__*/_jsx(PostContainer, {\n        size: \"small\",\n        post: singlePost\n      }) : /*#__PURE__*/_jsx(LoaderContainer, {\n        children: /*#__PURE__*/_jsx(StyledLoader, {})\n      })\n    });\n  };\n\n  var renderPost = function renderPost() {\n    if (InitialPost) {\n      return getPostForRender(InitialPost);\n    } else {\n      return getPostForRender(post);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(MainLayout, {\n    children: renderPost()\n  });\n}\n\nPost.getStaticProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var query, req, response, InitialPost;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            query = _ref2.query, req = _ref2.req;\n\n            if (req) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              InitialPost: null\n            });\n\n          case 3:\n            _context2.next = 5;\n            return fetch(\"https://jsonplaceholder.typicode.com/posts/\".concat(query.id));\n\n          case 5:\n            response = _context2.sent;\n            _context2.next = 8;\n            return response.json();\n\n          case 8:\n            InitialPost = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              InitialPost: InitialPost\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module"}